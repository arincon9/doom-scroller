if(window.doomScroller=window.doomScroller||[],chrome&&chrome.runtime&&chrome.runtime.getURL?window.doomScroller.location=chrome.runtime.getURL("doom-res/").replace(/\/doom-res\/$/,""):browser&&browser.runtime&&browser.runtime.getURL?window.doomScroller.location=browser.runtime.getURL("doom-res/").replace(/\/doom-res\/$/,""):window.doomScroller.location=document.currentScript.src.substring(0,document.currentScript.src.lastIndexOf("/")),doomScroller.start=function(){const e=window.doomScroller.location,o=document.getElementsByTagName("head")[0],n=document.createElement("link");n.href=e+"/doom-res/doom-scroller-1.0.css",n.type="text/css",n.rel="stylesheet",o.append(n);const r=`\n    <div id="doom-gameover"></div>\n    <div id="doom-damage"></div>\n    <div id="doom-bar" style="display:none">\n        <div id="doom-console">\n            <div id="doom-health"><img id="doom-health-img" src="${e}/doom-res/damage.png"></div>\n            <div id="doom-face"><img id="doom-face-img" src="${e}/doom-res/face.png"></div>\n            <img id="doom-full-console" src="${e}/doom-res/hud-full.png">\n            <img id="doom-res-console" src="${e}/doom-res/hud-res.png">\n        </div>\n    </div>\n    `;document.body.insertAdjacentHTML("beforeend",r);const t=e+"/doom-res/dsplpain.wav",d=e+"/doom-res/dspdiehi.wav";let c,i,a,m=!1,s=1,l=0,u=null,g=!1,w=1;function f(e){return fetch(e).then(e=>e.arrayBuffer()).then(e=>a.decodeAudioData(e)).then(e=>e)}function h(e){const o=a.createBufferSource();o.buffer=e,o.connect(a.destination),o.start()}function b(){m&&s<5&&h(c),function(e){let o;switch(e){case 0:o="0%";break;case 1:o="20%";break;case 2:o="40%";break;case 3:o="60%";break;case 4:o="80%";break;case 5:o="100%"}document.getElementById("doom-health-img").style.backgroundPositionY=o}(s),function(e){let o;switch(e){case 0:o="0%";break;case 1:o="19.1%";break;case 2:o="38.2%";break;case 3:o="58.1%";break;case 4:o="78.9%";break;case 5:o="99%"}document.getElementById("doom-face-img").style.backgroundPositionY=o}(s++);const e=document.getElementById("doom-damage");e.classList.add("doom-damage"),setTimeout((function(){e.classList.remove("doom-damage")}),200),6===s&&(document.getElementById("doom-gameover").classList.add("doom-gameover-animate"),m&&h(i))}return void 0!==doomScroller.scrollDamage&&(w=doomScroller.scrollDamage),!1===doomScroller.gameoverLogo&&(document.getElementById("doom-gameover").style.backgroundImage="none"),document.getElementById("doom-console").addEventListener("click",(function(){!async function(){a=new AudioContext,c=await f(t),i=await f(d)}(),m=!0})),window.addEventListener("scroll",(function(e){null===u&&(u=window.innerHeight*w+window.scrollY),l=window.scrollY,g||(window.requestAnimationFrame((function(){l>u&&s<=5&&(b(),u+=window.innerHeight*w),g=!1})),g=!0)})),function(){}},chrome||browser){(e=>chrome.storage?new Promise((o,n)=>chrome.storage.local.get(e,o)):browser.storage.local.get(e))("sites").then(({sites:e})=>{e.split("\n").includes(window.location.hostname)&&doomScroller.start()})}else!1!==doomScroller.autoStart&&doomScroller.start();